const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LandingPage-B0mgk5f0.js","assets/react-vendor-DrMYZYBk.js","assets/LoginModal-DRZjuJVW.js","assets/ui-vendor-CRI_hzdD.js","assets/Navbar-DOM3g2ZX.js","assets/PeakPostCard-CPCJJZzo.js","assets/format-B7_Hd8Ri.js","assets/supabase-2HotJipb.js","assets/LandingPage-bIkKzpZj.css","assets/AboutPage-D7YprwMn.js","assets/UserProfile-Cz1-I0Kk.js","assets/ShareModal-Dvz0fxPp.js","assets/PeakPostDetail-BwTzcKx8.js"])))=>i.map(i=>d[i]);
import{r as e,a as t,u as r,R as s,L as a,b as n,d as o,B as i}from"./react-vendor-DrMYZYBk.js";import{c as l,_ as c}from"./supabase-2HotJipb.js";import{V as u,A as d,H as m,O as f}from"./ui-vendor-CRI_hzdD.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var p={exports:{}},h={},x=e,j=Symbol.for("react.element"),y=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,b=x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function v(e,t,r){var s,a={},n=null,o=null;for(s in void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),void 0!==t.ref&&(o=t.ref),t)g.call(t,s)&&!_.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:j,type:e,key:n,ref:o,props:a,_owner:b.current}}h.Fragment=y,h.jsx=v,h.jsxs=v,p.exports=h;var w,N=p.exports,I=t;w=I.createRoot,I.hydrateRoot;const P=l("https://iqqjvjzvzizrxbymrjoc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlxcWp2anp2eml6cnhieW1yam9jIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIzMzE2NDAsImV4cCI6MjA1NzkwNzY0MH0.qlWq4kxm_aRjF0I75vha_L55me17lsPNaFVHHCjFY_c",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"x-application-name":"peakly"}},realtime:{params:{eventsPerSecond:10}},db:{schema:"public"}});async function E(e,t){try{const{data:t,error:r}=await e;if(r)throw r;return t}catch(r){return u.error(t),null}}function k(){const[t,s]=e.useState(null),[a,n]=e.useState(!0),o=r(),i=e.useRef(!1);e.useRef(performance.now());return e.useEffect((()=>{!async function(){try{performance.now();const{data:{session:e},error:t}=await P.auth.getSession();performance.now();if(t)throw t;i.current=!!e,s(e)}catch(e){s(null)}finally{n(!1)}}();const{data:{subscription:e}}=P.auth.onAuthStateChange(((e,t)=>{const r=i.current;i.current=!!t,s(t),r&&!t&&"/"!==o.pathname&&u.error("Sitzung abgelaufen. Bitte melde dich erneut an.")}));return()=>e.unsubscribe()}),[o.pathname]),{session:t,loading:a}}class S extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t})}render(){if(this.state.hasError){const e=this.state.error?.message||"Ein unbekannter Fehler ist aufgetreten";return N.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px] p-8 text-center",children:[N.jsx(d,{className:"w-12 h-12 text-red-500 mb-4"}),N.jsx("h2",{className:"text-xl font-bold mb-2",children:"Etwas ist schiefgelaufen"}),N.jsx("p",{className:"text-gray-600 mb-4",children:e}),N.jsxs("div",{className:"flex gap-4",children:[N.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-black text-white rounded-xl hover:bg-gray-900",children:"Seite neu laden"}),N.jsxs(a,{to:"/",className:"px-4 py-2 border border-gray-300 rounded-xl hover:bg-gray-50 flex items-center gap-2",children:[N.jsx(m,{className:"w-4 h-4"}),"Zur Startseite"]})]}),!1]})}return this.props.children}}function O(){const[t,r]=e.useState(!1);return e.useEffect((()=>{const e=setTimeout((()=>{r(!0)}),5e3);return()=>clearTimeout(e)}),[]),N.jsxs("div",{className:"fixed inset-0 bg-white flex flex-col items-center justify-center",children:[N.jsx("img",{src:"https://iqqjvjzvzizrxbymrjoc.supabase.co/storage/v1/object/public/peakly/logo/Peakly%20Logo.png",alt:"Peakly",className:"w-32 h-auto mb-8"}),N.jsx("div",{className:"w-48 h-1 bg-gray-100 rounded-full overflow-hidden",children:N.jsx("div",{className:"h-full w-[40%] bg-black",style:{animation:"loading 1.5s ease-in-out infinite"}})}),t&&N.jsx("p",{className:"mt-8 text-sm text-gray-500",children:"Das dauert länger als erwartet..."})]})}function z(){return N.jsx("footer",{className:"bg-white border-t border-gray-100",children:N.jsx("div",{className:"max-w-[1000px] mx-auto px-4 py-6",children:N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsxs("div",{className:"text-sm text-gray-500",children:["© ",(new Date).getFullYear()," Peakly. All rights reserved."]}),N.jsx("a",{href:"https://balint-design.webflow.io/imprint",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-gray-500 hover:text-gray-700",children:"Impressum"})]})})})}const L=s.lazy((()=>c((()=>import("./LandingPage-B0mgk5f0.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then((e=>({default:e.LandingPage}))))),R=s.lazy((()=>c((()=>import("./AboutPage-D7YprwMn.js")),__vite__mapDeps([9,1,4,3,2,7])).then((e=>({default:e.AboutPage}))))),D=s.lazy((()=>c((()=>import("./UserProfile-Cz1-I0Kk.js")),__vite__mapDeps([10,1,3,2,4,11,5,6,7])).then((e=>({default:e.UserProfile}))))),A=s.lazy((()=>c((()=>import("./PeakPostDetail-BwTzcKx8.js")),__vite__mapDeps([12,1,4,3,11,6,7])).then((e=>({default:e.PeakPostDetail})))));function C(){const{session:t,loading:r}=k();return r?N.jsx(O,{}):N.jsxs("div",{className:"min-h-screen flex flex-col",children:[N.jsx(f,{position:"top-center"}),N.jsx(S,{children:N.jsx(e.Suspense,{fallback:N.jsx(O,{}),children:N.jsx("main",{className:"flex-1",children:N.jsxs(n,{children:[N.jsx(o,{path:"/",element:N.jsx(L,{})}),N.jsx(o,{path:"/about",element:N.jsx(R,{})}),N.jsx(o,{path:"/posts/:id",element:N.jsx(A,{})}),t&&N.jsx(o,{path:"/profile",element:N.jsx(D,{userId:t.user.id,isPublic:!1})}),N.jsx(o,{path:"/profile/:username",element:N.jsx(D,{})})]})})})}),N.jsx(z,{})]})}w(document.getElementById("root")).render(N.jsx(e.StrictMode,{children:N.jsx(i,{children:N.jsx(C,{})})}));export{E as h,N as j,P as s,k as u};
